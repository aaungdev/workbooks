Hello,

This report is generated by the AMG automation tool, with data coming from Mi-portal. For your reference, I’ve included the logic code for the “sign-off compliant = false” result below.

Based on my understanding, the GRA post-validation sign-offs are approved, while the MMR submission sign-offs are still pending. Please compare with other submissions — only this one is not completing orderly.

Correct me if I’m wrong.

=IFERROR(
   FILTER(GC:GC, (CQ:CQ=GF206)*(CV:CV=GK206)) *
   IFS(
      OR(GK206="OMRs", GK206="RAIs", GK206="RMs"),
         XLOOKUP(GF206, STATIC!B:B, 'BAU CAPACITY AGGREGATE'!C:C, 0),
      OR(GK206="Submissions - MDR", GK206="Submissions - non-MDR"),
         XLOOKUP(GF206, STATIC!B:B, 'SUBMISSION CAPACITY AGGREGATE'!C:C, 0),
      OR(GK206="Breaches - Resolved", GK206="Breaches - Active"),
         0
   ),
"")
=SUM(
  SUMIFS('WORK DRIVER'!GC:GC, 'WORK DRIVER'!CQ:CQ, STATIC!B5, 'WORK DRIVER'!CV:CV, "MRM Tasks"),
  SUMIFS('WORK DRIVER'!GC:GC, 'WORK DRIVER'!CQ:CQ, STATIC!B5, 'WORK DRIVER'!CV:CV, "OMRs"),
  SUMIFS('WORK DRIVER'!GC:GC, 'WORK DRIVER'!CQ:CQ, STATIC!B5, 'WORK DRIVER'!CV:CV, "RAIs"),
  SUMIFS('WORK DRIVER'!GC:GC, 'WORK DRIVER'!CQ:CQ, STATIC!B5, 'WORK DRIVER'!CV:CV, "RMs")
)

=IFERROR(INDEX(STATIC!A:A, MATCH(Model Capacity Aggregate!K3, STATIC!D:D, 0)), "")
=SUM(SUMIFS('Capacity Plan'!W:W,
            'Capacity Plan'!F:F,E3,
            'Capacity Plan'!G:G,"*2025*",
            'Capacity Plan'!E:E,{"*BAU*","*RAI*","*OMR*"}))
Category:
Indicate whether the repository is a model, tool, or other type.
# Your Jira credentials and base URL — replace these with your real values
ENV_VALUES = {
    "JIRA_API_TOKEN": "your_api_token_here",
    "JIRA_BASE_URL": "https://yourcompany.atlassian.net",
}

class JiraQuerier:
    _jira_api = None  # Class variable to hold Jira client instance

    @classmethod
    def setup_jira_api(cls):
        # Initialize Jira API client if not already done
        if cls._jira_api is None:
            cls._jira_api = JIRA(
                token_auth=ENV_VALUES["JIRA_API_TOKEN"],  # Use API token for authentication
                server=ENV_VALUES["JIRA_BASE_URL"],       # Jira instance URL
                kerberos=True,                            # Enable Kerberos authentication (per your original code)
                options={"verify": False},                # Disable SSL verification (use with caution)
            )

    @classmethod
    def get_components_by_project(cls, project_key):
        cls.setup_jira_api()  # Make sure Jira client is ready

        jql = f'project = {project_key}'  # Jira Query Language string to get all issues for the project
        issues = cls._jira_api.search_issues(jql, maxResults=50)  # Fetch up to 50 issues

        result = {}  # Dictionary to store results: issue_key -> list of component names

        for issue in issues:
            comps = issue.fields.components  # Access the components field from issue
            # Extract component names if any, else empty list
            comp_names = [c.name for c in comps] if comps else []
            result[issue.key] = comp_names  # Store component names keyed by issue key

        return result  # Return the dictionary of issue components

# Main block runs when script is executed directly
if __name__ == "__main__":
    components = JiraQuerier.get_components_by_project("GRAAMG")  # Query project GRAAMG

    # Print each issue's key and its Component(s)
    for issue_key, comp_list in components.items():
        print(f"{issue_key}: Component(s) = {comp_list}")
